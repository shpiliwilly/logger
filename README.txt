TODO:
1. add tests, fixes, tide up API
2. write logs to file. size if log files has to be limited.
3. benchmarks
4. switch to lock free queue (vyukov)
5. benchmarks
6. improve logging of memory dumps + benchmarks
